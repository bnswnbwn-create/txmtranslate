<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TxmTranslate |  住专转</title>
    <style>
        :root { --main: #e50914; --bg: #0a0a0a; --card: #1a1a1a; --text: #ffffff; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 0; }
        
        header { background: #000; padding: 20px 5%; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--main); }
        .logo { font-size: 24px; font-weight: bold; color: var(--main); }
        
        .container { padding: 40px 5%; }
        .gallery { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; }
        
        .card { background: var(--card); border-radius: 8px; overflow: hidden; cursor: pointer; transition: 0.3s; border: 1px solid #333; position: relative; }
        .card:hover { transform: scale(1.05); border-color: var(--main); }
        .card img { width: 100%; height: 280px; object-fit: cover; }
        .card-info { padding: 15px; text-align: center; font-weight: bold; }
        .badge { position: absolute; top: 10px; right: 10px; background: var(--main); padding: 5px 10px; border-radius: 4px; font-size: 12px; }

        /*  */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 1000; justify-content: center; align-items: center; }
        .modal-content { background: #181818; padding: 30px; border-radius: 12px; width: 90%; max-width: 500px; position: relative; }
        .close { position: absolute; left: 20px; top: 15px; font-size: 25px; cursor: pointer; color: #888; }

        input, select, button { width: 100%; padding: 12px; margin: 10px 0; border-radius: 6px; border: 1px solid #333; background: #222; color: white; }
        .btn-main { background: var(--main); border: none; font-weight: bold; cursor: pointer; }
        
        .ep-list { margin-top: 20px; max-height: 200px; overflow-y: auto; }
        .ep-item { background: #2a2a2a; padding: 10px; margin-bottom: 5px; border-radius: 5px; display: flex; justify-content: space-between; }
        .ep-item a { color: #58a6ff; text-decoration: none; }
    </style>
</head>
<body>

<header>
    <div class="logo">TxmTranslate</div>
    <button class="btn-main" style="width: auto; padding: 8px 15px;" onclick="openModal('addModal')">+ 住祝 住专</button>
</header>

<div class="container">
    <div class="gallery" id="gallery"></div>
</div>

<div id="addModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal('addModal')">&times;</span>
        <h2>住驻转 住专 砖</h2>
        <input type="text" id="sTitle" placeholder="砖 住专">
        <input type="text" id="sImg" placeholder="拽砖专 转 (URL)">
        <select id="sStatus">
            <option value="active">驻注</option>
            <option value="soon">拽专</option>
        </select>
        <button class="btn-main" onclick="addNewSeries()">砖专 住专</button>
    </div>
</div>

<div id="epModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal('epModal')">&times;</span>
        <h2 id="viewTitle"></h2>
        <div style="border-top: 1px solid #333; padding-top: 15px;">
            <input type="text" id="epName" placeholder="砖 驻专拽">
            <input type="text" id="epUrl" placeholder="拽砖专 驻专拽">
            <button class="btn-main" onclick="addEpisode()">住祝 驻专拽</button>
        </div>
        <div class="ep-list" id="epList"></div>
    </div>
</div>

<script>
    let db = JSON.parse(localStorage.getItem('txm_db')) || [];
    let currentIdx = null;

    function render() {
        const gallery = document.getElementById('gallery');
        gallery.innerHTML = '';
        db.forEach((item, index) => {
            gallery.innerHTML += `
                <div class="card" onclick="showEpisodes(${index})">
                    ${item.status === 'soon' ? '<div class="badge">拽专</div>' : ''}
                    <img src="${item.img || 'https://via.placeholder.com/200x300?text=No+Image'}">
                    <div class="card-info">${item.title}</div>
                </div>
            `;
        });
    }

    function addNewSeries() {
        const title = document.getElementById('sTitle').value;
        const img = document.getElementById('sImg').value;
        const status = document.getElementById('sStatus').value;
        if(!title) return;
        db.push({ title, img, status, episodes: [] });
        save();
        closeModal('addModal');
        render();
    }

    function showEpisodes(index) {
        currentIdx = index;
        const s = db[index];
        document.getElementById('viewTitle').innerText = s.title;
        renderEpisodes();
        openModal('epModal');
    }

    function addEpisode() {
        const name = document.getElementById('epName').value;
        const url = document.getElementById('epUrl').value;
        if(!name || !url) return;
        db[currentIdx].episodes.push({ name, url });
        save();
        renderEpisodes();
        document.getElementById('epName').value = '';
        document.getElementById('epUrl').value = '';
    }

    function renderEpisodes() {
        const list = document.getElementById('epList');
        const eps = db[currentIdx].episodes;
        list.innerHTML = eps.length ? '' : '<p> 驻专拽 注</p>';
        eps.forEach(ep => {
            list.innerHTML += `
                <div class="ep-item">
                    <span>${ep.name}</span>
                    <a href="${ep.url}" target="_blank">爪驻 </a>
                </div>
            `;
        });
    }

    function save() { localStorage.setItem('txm_db', JSON.stringify(db)); }
    function openModal(id) { document.getElementById(id).style.display = 'flex'; }
    function closeModal(id) { document.getElementById(id).style.display = 'none'; }

    render();
</script>
</body>
</html>